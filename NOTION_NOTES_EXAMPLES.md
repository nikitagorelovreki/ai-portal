# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¾Ğº Ğ² Notion Ğ´Ğ»Ñ Health MVP

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¾Ğº

### 1. ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ†ĞµĞ»Ğ¸ Ğ¿Ğ¾ ÑˆĞ°Ğ³Ğ°Ğ¼
```
Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº: "Ğ¦ĞµĞ»Ğ¸ Ğ¿Ğ¾ ÑˆĞ°Ğ³Ğ°Ğ¼ Ğ½Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ"

ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚:
Ğ¦ĞµĞ»ÑŒ: 8000-12000 ÑˆĞ°Ğ³Ğ¾Ğ² Ğ² Ğ´ĞµĞ½ÑŒ
Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ: 6000-8000 ÑˆĞ°Ğ³Ğ¾Ğ² (Ğ´Ğ½Ğ¸ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°)
Ğ•ÑĞ»Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ 15000 ÑˆĞ°Ğ³Ğ¾Ğ² - ÑĞ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ¼Ğ¿ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ
```

### 2. Ğ”Ğ½Ğ¸ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
```
Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº: "Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°"

ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚:
Ğ’Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ - Ğ´ĞµĞ½ÑŒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
Ğ¡Ñ€ĞµĞ´Ğ° - Ğ»ĞµĞ³ĞºĞ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ
ĞŸÑÑ‚Ğ½Ğ¸Ñ†Ğ° - Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ ÑˆĞ°Ğ³Ğ¾Ğ² (Ğ´Ğ¾ 14000)
```

### 3. Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°
```
Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº: "ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸"

ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚:
Ğ•ÑĞ»Ğ¸ ÑƒÑÑ‚Ğ°Ğ» - Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 5000 ÑˆĞ°Ğ³Ğ¾Ğ²
Ğ•ÑĞ»Ğ¸ Ğ±Ğ¾Ğ»ĞµÑ - Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 3000 ÑˆĞ°Ğ³Ğ¾Ğ²
Ğ•ÑĞ»Ğ¸ Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° - Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾ 15000 ÑˆĞ°Ğ³Ğ¾Ğ²
```

### 4. Ğ¡ĞµĞ·Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ†ĞµĞ»Ğ¸
```
Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº: "Ğ›ĞµÑ‚Ğ½Ğ¸Ğµ Ñ†ĞµĞ»Ğ¸"

ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚:
Ğ˜ÑĞ½ÑŒ-Ğ°Ğ²Ğ³ÑƒÑÑ‚: 10000-14000 ÑˆĞ°Ğ³Ğ¾Ğ²
Ğ’ Ğ¶Ğ°Ñ€ĞºĞ¸Ğµ Ğ´Ğ½Ğ¸: 6000-8000 ÑˆĞ°Ğ³Ğ¾Ğ²
ĞŸĞ»ÑĞ¶Ğ½Ñ‹Ğµ Ğ´Ğ½Ğ¸: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 8000 ÑˆĞ°Ğ³Ğ¾Ğ²
```

## ğŸ” ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²

### Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ñ†ĞµĞ»ĞµĞ¹ Ğ¿Ğ¾ ÑˆĞ°Ğ³Ğ°Ğ¼
```typescript
const stepPatterns = [
  /(\d+)-(\d+)\s*ÑˆĞ°Ğ³Ğ¾Ğ²?/gi,           // "8000-12000 ÑˆĞ°Ğ³Ğ¾Ğ²"
  /Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼\s*(\d+)\s*ÑˆĞ°Ğ³Ğ¾Ğ²?/gi,       // "Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 6000 ÑˆĞ°Ğ³Ğ¾Ğ²"
  /Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼\s*(\d+)\s*ÑˆĞ°Ğ³Ğ¾Ğ²?/gi,      // "Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 15000 ÑˆĞ°Ğ³Ğ¾Ğ²"
  /Ñ†ĞµĞ»ÑŒ:\s*(\d+)-(\d+)/gi,            // "Ğ¦ĞµĞ»ÑŒ: 8000-12000"
  /Ğ´Ğ¾\s*(\d+)\s*ÑˆĞ°Ğ³Ğ¾Ğ²?/gi,            // "Ğ´Ğ¾ 14000 ÑˆĞ°Ğ³Ğ¾Ğ²"
  /Ğ¼Ğ¾Ğ¶Ğ½Ğ¾\s*Ğ´Ğ¾\s*(\d+)/gi              // "Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾ 15000"
];
```

### Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ½ĞµĞ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
```typescript
const restDayPatterns = [
  /(Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº|Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº|ÑÑ€ĞµĞ´Ğ°|Ñ‡ĞµÑ‚Ğ²ĞµÑ€Ğ³|Ğ¿ÑÑ‚Ğ½Ğ¸Ñ†Ğ°|ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ğ°|Ğ²Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ)\s*[-â€”]\s*Ğ´ĞµĞ½ÑŒ\s*Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°/gi,
  /(Ğ¿Ğ½|Ğ²Ñ‚|ÑÑ€|Ñ‡Ñ‚|Ğ¿Ñ‚|ÑĞ±|Ğ²Ñ)\s*[-â€”]\s*Ğ¾Ñ‚Ğ´Ñ‹Ñ…/gi,
  /Ğ´ĞµĞ½ÑŒ\s*Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:\s*(.+)/gi
];
```

### Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
```typescript
const rulePatterns = [
  /ĞµÑĞ»Ğ¸\s+(.+?)\s*[-â€”]\s*(.+)/gi,     // "Ğ•ÑĞ»Ğ¸ ÑƒÑÑ‚Ğ°Ğ» - Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 5000"
  /Ğ¿Ñ€Ğ¸\s+(.+?)\s*[-â€”]\s*(.+)/gi,      // "ĞŸÑ€Ğ¸ Ğ±Ğ¾Ğ»ĞµĞ·Ğ½Ğ¸ - Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 3000"
  /ĞºĞ¾Ğ³Ğ´Ğ°\s+(.+?)\s*[-â€”]\s*(.+)/gi     // "ĞšĞ¾Ğ³Ğ´Ğ° Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° - Ğ´Ğ¾ 15000"
];
```

## ğŸ“Š Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° parsed_data

```json
{
  "stepGoals": [
    {
      "min": 8000,
      "max": 12000,
      "condition": "default",
      "isActive": true
    },
    {
      "min": 6000,
      "max": 8000,
      "condition": "weekend",
      "isActive": true
    }
  ],
  "restDays": [
    {
      "day": "sunday",
      "description": "Ğ´ĞµĞ½ÑŒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°"
    }
  ],
  "rules": [
    {
      "condition": "overactivity",
      "action": "slow_down",
      "threshold": 15000,
      "description": "ÑĞ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ¼Ğ¿ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ"
    }
  ]
}
```

## ğŸ¯ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ°: "ĞœĞ¾Ğ¸ Ñ†ĞµĞ»Ğ¸ Ğ½Ğ° ÑÑ‚Ñƒ Ğ½ĞµĞ´ĞµĞ»Ñ"
```
Ğ¦ĞµĞ»ÑŒ: 8000-12000 ÑˆĞ°Ğ³Ğ¾Ğ² Ğ² Ğ´ĞµĞ½ÑŒ
Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ: 6000-8000 ÑˆĞ°Ğ³Ğ¾Ğ²
Ğ•ÑĞ»Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ 15000 - ÑĞ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ¼Ğ¿
Ğ’Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ - Ğ´ĞµĞ½ÑŒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
```

### Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°:
```json
{
  "stepGoals": [
    {"min": 8000, "max": 12000, "condition": "weekday"},
    {"min": 6000, "max": 8000, "condition": "weekend"}
  ],
  "restDays": [
    {"day": "sunday", "description": "Ğ´ĞµĞ½ÑŒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°"}
  ],
  "rules": [
    {"condition": "overactivity", "threshold": 15000, "action": "slow_down"}
  ]
}
```

## ğŸ”§ Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ğ¹

### ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ†ĞµĞ»ĞµĞ¹
```typescript
async function updateGoalsFromNotes() {
  const notes = await notionService.getHealthNotes();
  const currentGoals = parseGoalsFromNotes(notes);
  
  // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ ĞºÑÑˆ Ñ†ĞµĞ»ĞµĞ¹
  await cache.set('current_goals', currentGoals, 3600); // 1 Ñ‡Ğ°Ñ
}

async function getCurrentGoals() {
  let goals = await cache.get('current_goals');
  if (!goals) {
    await updateGoalsFromNotes();
    goals = await cache.get('current_goals');
  }
  return goals;
}
```

### Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¾Ğ²ĞµÑ‚Ğ¾Ğ²
```typescript
async function generateAdvice(steps: number, hour: number) {
  const goals = await getCurrentGoals();
  const isRestDay = checkIfRestDay();
  
  if (isRestDay && steps > goals.max * 0.8) {
    return {
      kind: 'slow_down',
      message: 'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ´ĞµĞ½ÑŒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°, ÑĞ±Ğ°Ğ²ÑŒ Ñ‚ĞµĞ¼Ğ¿!',
      reason: 'rest_day_overactivity'
    };
  }
  
  if (hour >= 18 && steps < goals.min * 0.75) {
    return {
      kind: 'go_walk',
      message: `ĞÑƒĞ¶Ğ½Ğ¾ ĞµÑ‰Ğµ ${goals.min - steps} ÑˆĞ°Ğ³Ğ¾Ğ² Ğ´Ğ¾ Ñ†ĞµĞ»Ğ¸!`,
      reason: 'low_steps_evening'
    };
  }
  
  // ... Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
}
```
